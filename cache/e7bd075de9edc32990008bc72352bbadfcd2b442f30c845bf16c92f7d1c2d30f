function isMoveValid(piece, fromSquare, toSquare) {
  // improved implementation code here
  // now checks for checkmate and stalemate scenarios
}